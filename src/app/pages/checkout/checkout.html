<section class="bg-gradient-to-b from-primary-light/10 to-background py-12 px-4 md:px-8 lg:px-16 min-h-screen">
  <div class="container mx-auto">
    <h1 class="font-display text-4xl md:text-5xl lg:text-4xl mb-6 text-accent text-center">Checkout</h1>
    <div class="w-24 h-1 bg-accent mx-auto mb-8 rounded-full"></div>
    <!-- Checkout Form -->
    <div *ngIf="!orderPlaced()" class="grid grid-cols-1 lg:grid-cols-3 gap-8">
      <!-- Customer Information Form -->
      <div class="lg:col-span-2">
        <div class="bg-background/50 p-6 md:p-8 rounded-2xl shadow-lg mb-8 checkout-form">
          <h2 class="text-xl font-semibold mb-6 text-accent">Customer Information</h2>

          <form [formGroup]="checkoutForm" (ngSubmit)="onSubmit()" class="space-y-6">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <!-- First Name -->
              <div>
                <label for="firstName" class="block text-sm font-medium text-gray-700 mb-1">First Name</label>
                <input type="text" id="firstName" formControlName="firstName"
                  class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-colors"
                  [ngClass]="{'border-red-500': hasError('firstName', 'required') || hasError('firstName', 'minlength')}">
                <p *ngIf="hasError('firstName', 'required') || hasError('firstName', 'minlength')"
                  class="mt-1 text-sm text-red-500">
                  {{ getErrorMessage('firstName') }}
                </p>
              </div>

              <!-- Last Name -->
              <div>
                <label for="lastName" class="block text-sm font-medium text-gray-700 mb-1">Last Name</label>
                <input type="text" id="lastName" formControlName="lastName"
                  class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-colors"
                  [ngClass]="{'border-red-500': hasError('lastName', 'required') || hasError('lastName', 'minlength')}">
                <p *ngIf="hasError('lastName', 'required') || hasError('lastName', 'minlength')"
                  class="mt-1 text-sm text-red-500">
                  {{ getErrorMessage('lastName') }}
                </p>
              </div>

              <!-- Email -->
              <div>
                <label for="email" class="block text-sm font-medium text-gray-700 mb-1">Email</label>
                <input type="email" id="email" formControlName="email"
                  class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-colors"
                  [ngClass]="{'border-red-500': hasError('email', 'required') || hasError('email', 'email')}">
                <p *ngIf="hasError('email', 'required') || hasError('email', 'email')"
                  class="mt-1 text-sm text-red-500">
                  {{ getErrorMessage('email') }}
                </p>
              </div>

              <!-- Phone -->
              <div>
                <label for="phone" class="block text-sm font-medium text-gray-700 mb-1">Phone</label>
                <input type="tel" id="phone" formControlName="phone"
                  class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-colors"
                  [ngClass]="{'border-red-500': hasError('phone', 'required') || hasError('phone', 'pattern')}">
                <p *ngIf="hasError('phone', 'required') || hasError('phone', 'pattern')"
                  class="mt-1 text-sm text-red-500">
                  {{ getErrorMessage('phone') }}
                </p>
              </div>
            </div>

            <!-- Address -->
            <div>
              <label for="address" class="block text-sm font-medium text-gray-700 mb-1">Shipping Address</label>
              <input type="text" id="address" formControlName="address"
                class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-colors"
                [ngClass]="{'border-red-500': hasError('address', 'required') || hasError('address', 'minlength')}">
              <p *ngIf="hasError('address', 'required') || hasError('address', 'minlength')"
                class="mt-1 text-sm text-red-500">
                {{ getErrorMessage('address') }}
              </p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <!-- City -->
              <div>
                <label for="city" class="block text-sm font-medium text-gray-700 mb-1">City</label>
                <input type="text" id="city" formControlName="city"
                  class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-colors"
                  [ngClass]="{'border-red-500': hasError('city', 'required')}">
                <p *ngIf="hasError('city', 'required')" class="mt-1 text-sm text-red-500">
                  {{ getErrorMessage('city') }}
                </p>
              </div>

              <!-- State -->


              <!-- ZIP Code -->
              <div>
                <label for="zipCode" class="block text-sm font-medium text-gray-700 mb-1">ZIP Code</label>
                <input type="text" id="zipCode" formControlName="zipCode"
                  class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-colors"
                  [ngClass]="{'border-red-500': hasError('zipCode', 'required') || hasError('zipCode', 'pattern')}">
                <p *ngIf="hasError('zipCode', 'required') || hasError('zipCode', 'pattern')"
                  class="mt-1 text-sm text-red-500">
                  {{ getErrorMessage('zipCode') }}
                </p>
              </div>
            </div>

            <!-- Payment Method -->
            <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
              <h3 class="font-medium mb-2">Payment Method</h3>
              <div class="flex items-center space-x-3">
                <div class="w-6 h-6 rounded-full border-2 border-primary flex items-center justify-center">
                  <div class="w-3 h-3 rounded-full bg-primary"></div>
                </div>
                <span>Cash on Delivery</span>
              </div>
              <p class="text-sm text-gray-500 mt-2">Payment will be collected upon delivery of your order.</p>
            </div>

            <div class="pt-4">
              <button type="submit"
                class="w-full  btn-primary hover:scale-105 cursor-pointer hover:bg-primary-dark text-white font-semibold py-3 px-6 rounded-full transition duration-300 ease-in-out transform hover:scale-105"
                [disabled]="cartService.items().length === 0">
                Place Order
              </button>
            </div>
          </form>
        </div>
      </div>

      <!-- Order Summary -->
      <div class="lg:col-span-1">
        <div class="bg-background/50 p-6 md:p-8 rounded-2xl shadow-lg sticky top-24 checkout-summary">
          <h2 class="text-xl font-semibold mb-6 text-accent">Order Summary</h2>

          <div *ngIf="cartService.items().length === 0" class="text-center py-6">
            <p class="text-gray-500">Your cart is empty</p>
            <a routerLink="/products" class="inline-block mt-4 text-primary hover:text-primary-dark font-medium">
              Continue Shopping
            </a>
          </div>

          <div *ngIf="cartService.items().length > 0">
            <div class="space-y-4 mb-6">
              <div *ngFor="let item of cartService.items()" class="flex justify-between">
                <span>{{ item.product.name }} Ã— {{ item.quantity }}</span>
                <span>${{ formatPrice(item.product.price * item.quantity) }}</span>
              </div>
            </div>

            <div class="border-t border-gray-200 pt-4 space-y-2">
              <div class="flex justify-between">
                <span>Subtotal</span>
                <span>EGP{{ formatPrice(cartService.subtotal()) }}</span>
              </div>
              <div class="flex justify-between font-semibold text-lg">
                <span>Total</span>
                <span>EGP{{ formatPrice(cartService.total()) }}</span>
              </div>
            </div>

            <div class="mt-6">
              <a routerLink="/cart"
                class="inline-block w-full text-center text-primary btn-primary hover:scale-105 font-medium">
                Back to Cart
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>