<nav class="sticky top-0 z-50 bg-white/95 backdrop-blur-lg shadow-sm" aria-label="Primary">
  <div class="mx-auto  max-w-6xl px-4 sm:px-6 lg:px-8">
    <!-- Mobile: drawer implementation -->
    <div class="drawer md:hidden">
      <input id="my-drawer" type="checkbox" class="drawer-toggle" />
      <div class="drawer-content">
        <div class="flex h-16 items-center justify-between">
          <div class="flex items-center gap-3">
            <label for="my-drawer" class="nav-icon-btn drawer-button" aria-label="Open menu">
              <!-- menu icon -->
              <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                stroke-linecap="round" stroke-linejoin="round">
                <line x1="3" y1="6" x2="21" y2="6" />
                <line x1="3" y1="12" x2="21" y2="12" />
                <line x1="3" y1="18" x2="21" y2="18" />
              </svg>
            </label>
          </div>
          <a routerLink="/" class="inline-flex items-center brand-link" aria-label="Vervy home">
            <span style="padding-left: 30px;" class="font-display text-2xl font-bold text-accent">Vervy</span>
          </a>
          <div class="flex items-center gap-3">
            <a class="nav-icon-btn relative" routerLink="/cart" aria-label="Cart">
              <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                stroke-linecap="round" stroke-linejoin="round">
                <circle cx="9" cy="21" r="1" />
                <circle cx="20" cy="21" r="1" />
                <path d="M1 1h4l2.68 12.39a2 2 0 0 0 2 1.61h7.72a2 2 0 0 0 2-1.61L23 6H6" />
              </svg>
              <span
                class="absolute -top-1 -right-1 flex h-4 w-4 items-center justify-center rounded-full bg-accent text-[10px] font-medium text-white">2</span>
            </a>
            <a class="nav-icon-btn" routerLink="/wishlist" aria-label="Wishlist">
              <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                stroke-linecap="round" stroke-linejoin="round">
                <path
                  d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 1 0-7.78 7.78L12 21.23l8.84-8.84a5.5 5.5 0 0 0 0-7.78z" />
              </svg>
            </a>
          </div>
        </div>
      </div>
      <div class="drawer-side">
        <label for="my-drawer" aria-label="close sidebar" class="drawer-overlay"></label>
        <div
          class="bg-white text-black min-h-full w-80 p-4 flex flex-col gap-6 overflow-y-auto overscroll-behavior-y-contain smooth-scroll">
          <!-- Mobile Search UI -->
          <div class="mt-2">
            <app-search-input placeholder="Search products..." [autoFocus]="false" [showClearButton]="true"
              [debounceTime]="300" (search)="onMobileSearch($event)" (clear)="onSearchClear()">
            </app-search-input>
          </div>

          <!-- Navigation Links -->
          <ul class="menu text-base-content p-0 text-black">
            <li><a routerLink="/" (click)="closeMenu()"
                class="py-3 text-black font-medium text-lg mb-0 touch-manipulation active:bg-accent/10 transition-colors">Home</a>
            </li>
            <li><a routerLink="/products" (click)="closeMenu()"
                class="py-3 text-black font-medium text-lg mb-0 touch-manipulation active:bg-accent/10 transition-colors">Products</a>
            </li>
            <li><a routerLink="/about" (click)="closeMenu()"
                class="py-3 text-black font-medium text-lg mb-0 touch-manipulation active:bg-accent/10 transition-colors">About</a>
            </li>
            <li><a routerLink="/contact" (click)="closeMenu()"
                class="py-3 text-black font-medium text-lg mb-0 touch-manipulation active:bg-accent/10 transition-colors">Contact</a>
            </li>
            <div>
              <div class="collapse collapse-arrow">
                <input type="checkbox" class="peer" id="categories-toggle" />
                <div
                  class="collapse-title font-medium text-lg mb-0 py-3 flex items-center justify-between touch-manipulation active:bg-accent/10 transition-colors">
                  <span class="mt-2 -ml-[5px]">Categories</span>
                </div>
                <div class="collapse-content p-0 transition-all duration-300 ease-in-out">
                  <ul class="menu text-base-content pl-4">
                    <li><a class="py-3 text-black text-base touch-manipulation active:bg-accent/10 transition-colors"
                        (click)="filterByCategory('Lip Gloss')">Lip Gloss</a></li>
                    <li><a class="py-3 text-black text-base touch-manipulation active:bg-accent/10 transition-colors"
                        (click)="filterByCategory('Lip Balm')">Lip Balm</a></li>
                    <li><a class="py-3 text-black text-base touch-manipulation active:bg-accent/10 transition-colors"
                        (click)="filterByCategory('Accessories')">Accessories</a></li>
                  </ul>
                </div>
              </div>
            </div>
          </ul>
        </div>
      </div>
    </div>

    <!-- Desktop: logo left, nav center, icons right -->
    <div class="hidden md:grid md:h-20 md:grid-cols-[1fr_auto_1fr] md:items-center">
      <a routerLink="/" class="inline-flex items-center" aria-label="Vervy home">
        <span class="font-display text-3xl font-bold text-accent ">Vervy</span>
      </a>

      <!-- Desktop Navigation Links -->
      <div class=" flex items-center space-x-8 text-black">
        <a class="text-black" routerLink="/" routerLinkActive="active-nav"
          [routerLinkActiveOptions]="{exact: true}">Home</a>
        <a class="text-black" routerLink="/products" routerLinkActive="active-nav">Products</a>
        <a class="text-black" routerLink="/about" routerLinkActive="active-nav">About</a>
        <a class="text-black" routerLink="/contact" routerLinkActive="active-nav">Contact</a>
      </div>

      <div class="flex items-center justify-end gap-5">
        <!-- Desktop Search Icon -->
        <button class="nav-icon-btn" (click)="openSearchModal()" aria-label="Search">
          <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <circle cx="11" cy="11" r="8" />
            <line x1="21" y1="21" x2="16.65" y2="16.65" />
          </svg>
        </button>

        <a class="nav-icon-btn relative" routerLink="/cart" aria-label="Cart">
          <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <circle cx="9" cy="21" r="1" />
            <circle cx="20" cy="21" r="1" />
            <path d="M1 1h4l2.68 12.39a2 2 0 0 0 2 1.61h7.72a2 2 0 0 0 2-1.61L23 6H6" />
          </svg>
          <span
            class="absolute -top-1 -right-1 flex h-4 w-4 items-center justify-center rounded-full bg-accent text-[10px] font-medium text-white">2</span>
        </a>
        <a class="nav-icon-btn" routerLink="/wishlist" aria-label="Wishlist">
          <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <path
              d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 1 0-7.78 7.78L12 21.23l8.84-8.84a5.5 5.5 0 0 0 0-7.78z" />
          </svg>
        </a>
      </div>
    </div>

  </div>
</nav>

<!-- Desktop Search Modal -->


@if(isSearchModalOpen()){
<div class="fixed inset-0 h-screen z-[60] flex items-start justify-center bg-black/50 backdrop-blur-lg"
  (click)="closeSearchModal()" role="dialog" aria-modal="true" aria-labelledby="search-modal-title">

  <div class="w-full max-w-2xl mx-4 mt-20 bg-white rounded-lg shadow-2xl" (click)="$event.stopPropagation()">

    <!-- Modal Header -->
    <div class="flex items-center justify-between p-4 border-b border-gray-200">
      <h2 id="search-modal-title" class="text-lg font-semibold text-gray-900">
        Search Products
      </h2>
      <button class="p-2 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100 transition-colors"
        (click)="closeSearchModal()" aria-label="Close search modal">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
          stroke-linecap="round" stroke-linejoin="round">
          <line x1="18" y1="6" x2="6" y2="18" />
          <line x1="6" y1="6" x2="18" y2="18" />
        </svg>
      </button>
    </div>

    <!-- Modal Content -->
    <div class="p-6">
      <app-search-input placeholder="Search for products..." [autoFocus]="true" [showClearButton]="true"
        [debounceTime]="300" (search)="onSearch($event)" (clear)="onSearchClear()">
      </app-search-input>

      <!-- Search Tips -->
      <div class="mt-4 text-sm text-gray-600">
        <p>Try searching for "lip gloss", "balm", or "accessories"</p>
      </div>
    </div>
  </div>
</div>
}